{% extends 'frontend.html' %}
<style>
    #preview-container {
        display: none;
    }
    #preview {
        width: 300px;
        height: 300px;
        border: 1px solid #000;
    }
</style>
{% block content %}
<div class="container mx-auto max-w-lg mt-8">
    <div class="flex justify-center">
        <div class="w-full">
            <div class="header-bar flex justify-start items-center bg-blue-600 text-white p-4 rounded-t-md">
                <a href="{% url 'resumes:index' %}" class="text-white">&#8592;Back</a>
            </div>

            <div class="card-body p-4 shadow-md mt-4">
                <h3 class="text-lg font-semibold mb-4">編輯個人信息</h3>
            <form method="post" id="myForm" action="{% url 'resumes:edit' pk=resume.pk %}"  enctype="multipart/form-data">
                {% csrf_token %}
                {{ form }}
                <div id="preview-container" style="display: none;"> 
                    <img id="preview" src="#" alt="Image Preview" style="width: 300px; height: 300px; border: 1px solid #000;" />
                </div>
                <div class="flex justify-end">
                    <button type="submit" class="button border border-blue-600 bg-white text-blue-600 px-2 py-2 hover:bg-blue-600 hover:text-white">提交</button>
                    <form method="post" action="{% url 'resumes:delete' pk=resume.pk %}">
                        {% csrf_token %}
                        <button type="submit" class="button border border-blue-600 bg-white text-blue-600 px-2 py-2 hover:bg-blue-600 hover:text-white">刪除</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
        document.querySelector('input[type="file"]').addEventListener('change', function(event) {
            const file = event.target.files[0];
            if (file) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    const previewContainer = document.getElementById('preview-container');
                    const previewImage = document.getElementById('preview');
                    previewImage.src = e.target.result;
                    previewContainer.style.display = 'block';
                };
                reader.readAsDataURL(file);
            }
        });
    </script>
{% endblock %}